webpackJsonp([13],{2158:function(n,l,u){"use strict";function o(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-icon",[["name","fa-map-pin"]],null,null,null,dl.b,dl.a)),Y._15(1,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"fa-map-pin")},null)}function t(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-icon",[["class","addon-forum-star"],["name","fa-star"]],null,null,null,dl.b,dl.a)),Y._15(1,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"fa-star")},null)}function e(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],[[1,"aria-label",0]],null,null,null,null)),Y._15(1,16384,null,0,fl.a,[Vn.a,Y.p,Y.K],null,null),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._16(4,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,dl.b,dl.a)),Y._15(5,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"],color:[1,"color"]},null),(n()(),Y._40(-1,null,["\n                "]))],function(n,l){n(l,5,0,"fa-circle","primary")},function(n,l){n(l,0,0,Y._41(l,0,0,Y._29(l,2).transform("addon.mod_forum.unread")))})}function i(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.showOptionsMenu(u)&&o}return o},ml.b,ml.a)),Y._15(1,1097728,[[2,4]],0,pl.a,[[8,""],Vn.a,Y.p,Y.K],{color:[0,"color"],clear:[1,"clear"]},null),(n()(),Y._40(-1,0,["\n                    "])),(n()(),Y._16(3,0,null,0,1,"core-icon",[["name","more"]],null,null,null,dl.b,dl.a)),Y._15(4,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null),(n()(),Y._40(-1,0,["\n                "]))],function(n,l){n(l,1,0,"dark","");n(l,4,0,"more")},null)}function a(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,19,"div",[["class","addon-mod-forum-post-title"]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._16(2,0,null,null,10,"h2",[["text-wrap",""]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,o)),Y._15(5,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,t)),Y._15(8,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._16(10,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Y._15(11,540672,null,0,$n.a,[Y.p,un.a,on.a,Gn.a,Yn.a,Bn.a,tn.a,zn.a,Jn.a,Qn.a,nn.a,Xn.a,[2,Zn.a],[2,nl.a],[2,sn.a],ll.a,ln.a,ul.a,ol.a,tl.a,Y.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,1,null,e)),Y._15(15,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,1,null,i)),Y._15(18,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,5,0,0==u.post.parent&&u.post.pinned);n(l,8,0,0==u.post.parent&&!u.post.pinned&&u.post.starred);n(l,11,0,u.post.subject,"module",u.forum&&u.forum.cmid,u.courseId);n(l,15,0,u.trackPosts&&!u.post.postread);n(l,18,0,u.optionsMenuEnabled)},null)}function s(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,hl.b,hl.a)),Y._15(1,16384,null,0,Il.a,[],null,null),Y._15(2,770048,null,0,vl.a,[Zn.a,un.a,tn.a,nn.a,ln.a,[2,sn.a]],{user:[0,"user"],courseId:[1,"courseId"]},null)],function(n,l){var u=l.component;n(l,2,0,u.post,u.courseId)},null)}function r(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"h3",[],null,null,null,null,null)),(n()(),Y._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.post.userfullname)})}function c(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,3,"p",[],null,null,null,null,null)),(n()(),Y._16(1,0,null,null,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Y._15(2,147456,[[3,4]],0,cl.a,[Vn.a,Y.p,Y.K],{name:[0,"name"]},null),(n()(),Y._40(3,null,[" ",""]))],function(n,l){n(l,2,0,"people")},function(n,l){var u=l.component;n(l,1,0,Y._29(l,2)._hidden);n(l,3,0,u.post.groupname)})}function d(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),Y._40(1,null,["",""])),Y._34(2,2)],null,function(n,l){var u=l.component;n(l,1,0,Y._41(l,1,0,n(l,2,0,Y._29(l.parent,0),1e3*u.post.modified,"strftimerecentfull")))})}function _(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,4,"p",[],null,null,null,null,null)),(n()(),Y._16(1,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Y._15(2,147456,[[3,4]],0,cl.a,[Vn.a,Y.p,Y.K],{name:[0,"name"]},null),(n()(),Y._40(3,null,[" ",""])),Y._32(131072,sl.a,[Yn.a,Y.i])],function(n,l){n(l,2,0,"time")},function(n,l){n(l,1,0,Y._29(l,2)._hidden);n(l,3,0,Y._41(l,3,0,Y._29(l,4).transform("core.notsent")))})}function f(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],[[1,"aria-label",0]],null,null,null,null)),Y._15(1,16384,null,0,fl.a,[Vn.a,Y.p,Y.K],null,null),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n                        "])),(n()(),Y._16(4,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,dl.b,dl.a)),Y._15(5,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"],color:[1,"color"]},null),(n()(),Y._40(-1,null,["\n                    "]))],function(n,l){n(l,5,0,"fa-circle","primary")},function(n,l){n(l,0,0,Y._41(l,0,0,Y._29(l,2).transform("addon.mod_forum.unread")))})}function m(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,"button",[["clear",""],["color","dark"],["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.showOptionsMenu(u)&&o}return o},ml.b,ml.a)),Y._15(1,1097728,[[2,4]],0,pl.a,[[8,""],Vn.a,Y.p,Y.K],{color:[0,"color"],clear:[1,"clear"]},null),(n()(),Y._40(-1,0,["\n                        "])),(n()(),Y._16(3,0,null,0,1,"core-icon",[["name","more"]],null,null,null,dl.b,dl.a)),Y._15(4,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null),(n()(),Y._40(-1,0,["\n                    "]))],function(n,l){n(l,1,0,"dark","");n(l,4,0,"more")},null)}function p(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,f)),Y._15(3,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,m)),Y._15(6,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                "]))],function(n,l){var u=l.component;n(l,3,0,u.trackPosts&&!u.post.postread);n(l,6,0,u.optionsMenuEnabled)},null)}function g(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,6,"div",[["padding-bottom",""]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(2,0,null,null,3,"ion-note",[["color","danger"]],null,null,null,null,null)),Y._15(3,16384,null,0,fl.a,[Vn.a,Y.p,Y.K],{color:[0,"color"]},null),(n()(),Y._40(4,null,["",""])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){n(l,3,0,"danger")},function(n,l){n(l,4,0,Y._41(l,4,0,Y._29(l,5).transform("addon.mod_forum.postisprivatereply")))})}function h(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,4,"div",[["no-lines",""]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(2,0,null,null,1,"core-files",[["showInline","true"]],null,null,null,bl.b,bl.a)),Y._15(3,376832,null,0,yl.a,[Pl.a,tn.a,Y.w],{files:[0,"files"],component:[1,"component"],componentId:[2,"componentId"],showInline:[3,"showInline"]},null),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,3,0,u.post.attachments,u.component,u.componentId,"true")},null)}function I(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,13,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,kl.b,kl.a)),Y._15(1,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,4,{contentLabel:0}),Y._37(603979776,5,{_buttons:1}),Y._37(603979776,6,{_icons:1}),Y._15(5,16384,null,0,Tl.a,[],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(7,0,null,0,2,"div",[["item-start",""]],null,null,null,null,null)),(n()(),Y._40(8,null,["",":"])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(11,0,null,2,1,"core-tag-list",[],null,null,null,Dl.b,Dl.a)),Y._15(12,49152,null,0,Ol.a,[Zn.a,[2,sn.a]],{tags:[0,"tags"]},null),(n()(),Y._40(-1,2,["\n        "]))],function(n,l){n(l,12,0,l.component.post.tags)},function(n,l){n(l,8,0,Y._41(l,8,0,Y._29(l,9).transform("core.tag.tags")))})}function v(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-rating-rate",[["contextLevel","module"]],null,[[null,"onUpdate"]],function(n,l,u){var o=!0;if("onUpdate"===l){o=!1!==n.component.ratingUpdated()&&o}return o},wl.b,wl.a)),Y._15(1,704512,null,0,Al.a,[on.a,Yn.a,ln.a,rn.a,cn.a,un.a],{ratingInfo:[0,"ratingInfo"],contextLevel:[1,"contextLevel"],instanceId:[2,"instanceId"],itemId:[3,"itemId"],itemSetId:[4,"itemSetId"],courseId:[5,"courseId"],aggregateMethod:[6,"aggregateMethod"],scaleId:[7,"scaleId"],userId:[8,"userId"]},{onUpdate:"onUpdate"})],function(n,l){var u=l.component;n(l,1,0,u.ratingInfo,"module",u.componentId,u.post.id,u.discussionId,u.courseId,u.forum.assessed,u.forum.scale,u.post.userid)},null)}function b(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-rating-aggregate",[["contextLevel","module"]],null,null,null,Ll.b,Ll.a)),Y._15(1,704512,null,0,El.a,[ln.a,Wl.a,rn.a,un.a],{ratingInfo:[0,"ratingInfo"],contextLevel:[1,"contextLevel"],instanceId:[2,"instanceId"],itemId:[3,"itemId"],aggregateMethod:[4,"aggregateMethod"],scaleId:[5,"scaleId"],courseId:[6,"courseId"]},null)],function(n,l){var u=l.component;n(l,1,0,u.ratingInfo,"module",u.componentId,u.post.id,u.forum.assessed,u.forum.scale,u.courseId)},null)}function y(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,14,"ion-item",[["class","addon-forum-reply-button item item-block"],["no-padding",""],["text-end",""]],null,null,null,kl.b,kl.a)),Y._15(1,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,7,{contentLabel:0}),Y._37(603979776,8,{_buttons:1}),Y._37(603979776,9,{_icons:1}),Y._15(5,16384,null,0,Tl.a,[],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.showReplyForm()&&o}return o},ml.b,ml.a)),Y._15(8,1097728,[[8,4]],0,pl.a,[[8,""],Vn.a,Y.p,Y.K],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),Y._40(-1,0,["\n                "])),(n()(),Y._16(10,0,null,0,1,"core-icon",[["name","fa-reply"]],null,null,null,dl.b,dl.a)),Y._15(11,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null),(n()(),Y._40(12,0,[" ","\n            "])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n        "]))],function(n,l){n(l,8,0,"","");n(l,11,0,"fa-reply")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.id);n(l,12,0,Y._41(l,12,0,Y._29(l,13).transform("addon.mod_forum.reply")))})}function P(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,18,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,kl.b,kl.a)),Y._15(1,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,16,{contentLabel:0}),Y._37(603979776,17,{_buttons:1}),Y._37(603979776,18,{_icons:1}),Y._15(5,16384,null,0,Tl.a,[],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),Y._15(8,16384,[[16,4]],0,Kl.a,[Vn.a,Y.p,Y.K,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),Y._40(9,null,["",""])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(12,0,null,4,5,"ion-checkbox",[["item-end",""]],[[2,"checkbox-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"]],function(n,l,u){var o=!0,t=n.component;if("click"===l){o=!1!==Y._29(n,13)._click(u)&&o}if("ngModelChange"===l){o=!1!==(t.replyData.isprivatereply=u)&&o}return o},Ml.b,Ml.a)),Y._15(13,1228800,null,0,Ul.a,[Vn.a,Sl.a,[2,Cl.a],Y.p,Y.K],null,null),Y._35(1024,null,jl.l,function(n){return[n]},[Ul.a]),Y._15(15,671744,null,0,jl.q,[[8,null],[8,null],[8,null],[2,jl.l]],{model:[0,"model"]},{update:"ngModelChange"}),Y._35(2048,null,jl.m,null,[jl.q]),Y._15(17,16384,null,0,jl.n,[jl.m],null,null),(n()(),Y._40(-1,2,["\n        "]))],function(n,l){n(l,15,0,l.component.replyData.isprivatereply)},function(n,l){n(l,9,0,Y._41(l,9,0,Y._29(l,10).transform("addon.mod_forum.privatereply")));n(l,12,0,Y._29(l,13)._disabled,Y._29(l,17).ngClassUntouched,Y._29(l,17).ngClassTouched,Y._29(l,17).ngClassPristine,Y._29(l,17).ngClassDirty,Y._29(l,17).ngClassValid,Y._29(l,17).ngClassInvalid,Y._29(l,17).ngClassPending)})}function k(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-icon",[["item-start",""],["name","fa-caret-right"]],null,null,null,dl.b,dl.a)),Y._15(1,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"fa-caret-right")},null)}function C(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-icon",[["item-start",""],["name","fa-caret-down"]],null,null,null,dl.b,dl.a)),Y._15(1,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null)],function(n,l){n(l,1,0,"fa-caret-down")},null)}function S(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"core-attachments",[],null,null,null,Nl.b,Nl.a)),Y._15(1,114688,null,0,Rl.a,[nn.a,on.a,Gn.a,en.a,Yn.a,Fl.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null)],function(n,l){var u=l.component;n(l,1,0,u.replyData.files,u.forum.maxbytes,u.forum.maxattachments,u.component,u.forum.cmid,!0)},null)}function x(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._11(16777216,null,null,1,null,S)),Y._15(3,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,3,0,u.forum.id&&u.forum.maxattachments>0)},null)}function T(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,86,"ion-list",[],[[8,"id",0]],null,null,null,null)),Y._15(1,16384,null,0,Vl.a,[Vn.a,Y.p,Y.K,Bn.a,Hl.l,ql.a],null,null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(3,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,kl.b,kl.a)),Y._15(4,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,10,{contentLabel:0}),Y._37(603979776,11,{_buttons:1}),Y._37(603979776,12,{_icons:1}),Y._15(8,16384,null,0,Tl.a,[],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),Y._15(11,16384,[[10,4]],0,Kl.a,[Vn.a,Y.p,Y.K,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),Y._40(12,null,["",""])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(15,0,null,3,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var o=!0;if("ngModelChange"===l){o=!1!==(n.component.replyData.subject=u)&&o}return o},$l.b,$l.a)),Y._15(16,671744,null,0,jl.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),Y._35(2048,null,jl.m,null,[jl.q]),Y._15(18,16384,null,0,jl.n,[jl.m],null,null),Y._15(19,5423104,null,0,Gl.a,[Vn.a,Bn.a,Sl.a,Yl.a,Y.p,Y.K,[2,nl.a],[2,Cl.a],[2,jl.m],ql.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n        "])),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(23,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,kl.b,kl.a)),Y._15(24,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,13,{contentLabel:0}),Y._37(603979776,14,{_buttons:1}),Y._37(603979776,15,{_icons:1}),Y._15(28,16384,null,0,Tl.a,[],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(30,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),Y._15(31,16384,[[13,4]],0,Kl.a,[Vn.a,Y.p,Y.K,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),Y._40(32,null,["",""])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(35,0,null,3,2,"core-rich-text-editor",[["item-content",""]],null,[[null,"contentChanged"]],function(n,l,u){var o=!0;if("contentChanged"===l){o=!1!==n.component.onMessageChange(u)&&o}return o},Bl.b,Bl.a)),Y._15(36,1228800,null,0,zl.a,[on.a,zn.a,un.a,Qn.a,[2,nl.a],Y.p,ln.a,tn.a,Bn.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},{contentChanged:"contentChanged"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,2,["\n        "])),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,P)),Y._15(41,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(43,0,null,null,13,"ion-item-divider",[["class","core-expandable item item-divider"],["text-wrap",""]],null,[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.toggleAdvanced()&&o}return o},kl.b,kl.a)),Y._15(44,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,19,{contentLabel:0}),Y._37(603979776,20,{_buttons:1}),Y._37(603979776,21,{_icons:1}),Y._15(48,16384,null,0,Jl.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._11(16777216,null,0,1,null,k)),Y._15(51,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._11(16777216,null,0,1,null,C)),Y._15(54,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(55,2,["\n            ","\n        "])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,x)),Y._15(59,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(61,0,null,null,24,"ion-grid",[["class","grid"]],null,null,null,null,null)),Y._15(62,16384,null,0,Ql.a,[],null,null),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(64,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),Y._15(65,16384,null,0,Xl.a,[],null,null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._16(67,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),Y._15(68,16384,null,0,Zl.a,[],null,null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._16(70,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.reply()&&o}return o},ml.b,ml.a)),Y._15(71,1097728,null,0,pl.a,[[8,""],Vn.a,Y.p,Y.K],{block:[0,"block"]},null),(n()(),Y._40(72,0,["",""])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._16(76,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),Y._15(77,16384,null,0,Zl.a,[],null,null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._16(79,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.cancel()&&o}return o},ml.b,ml.a)),Y._15(80,1097728,null,0,pl.a,[[8,""],Vn.a,Y.p,Y.K],{color:[0,"color"],block:[1,"block"]},null),(n()(),Y._40(81,0,["",""])),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._40(-1,null,["\n    "]))],function(n,l){var u=l.component;n(l,16,0,u.replyData.subject);n(l,19,0,"text",Y._41(l,19,1,Y._29(l,20).transform("addon.mod_forum.subject")));n(l,36,0,Y._41(l,36,0,Y._29(l,37).transform("addon.mod_forum.replyplaceholder")),u.messageControl,"mod_forum_reply_"+u.post.id,u.component,u.componentId);n(l,41,0,u.accessInfo.canpostprivatereply);n(l,51,0,!u.advanced);n(l,54,0,u.advanced);n(l,59,0,u.advanced);n(l,71,0,"");n(l,80,0,"light","")},function(n,l){var u=l.component;n(l,0,0,"addon-forum-reply-edit-form-"+u.uniqueId);n(l,12,0,Y._41(l,12,0,Y._29(l,13).transform("addon.mod_forum.subject")));n(l,15,0,Y._29(l,18).ngClassUntouched,Y._29(l,18).ngClassTouched,Y._29(l,18).ngClassPristine,Y._29(l,18).ngClassDirty,Y._29(l,18).ngClassValid,Y._29(l,18).ngClassInvalid,Y._29(l,18).ngClassPending);n(l,32,0,Y._41(l,32,0,Y._29(l,33).transform("addon.mod_forum.message")));n(l,55,0,Y._41(l,55,0,Y._29(l,56).transform("addon.mod_forum.advanced")));n(l,70,0,""==u.replyData.subject||null==u.replyData.message);n(l,72,0,Y._41(l,72,0,Y._29(l,73).transform("addon.mod_forum.posttoforum")));n(l,81,0,Y._41(l,81,0,Y._29(l,82).transform("core.cancel")))})}function D(n){return Y._42(0,[Y._32(0,nu.a,[Jn.a,lu.a]),(n()(),Y._16(1,0,null,null,71,"div",[["class","addon-mod_forum-post"]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._16(3,0,null,null,37,"ion-card-header",[["no-padding",""],["text-wrap",""]],[[8,"id",0]],null,null,null,null)),Y._15(4,16384,null,0,uu.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(6,0,null,null,33,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,kl.b,kl.a)),Y._15(7,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,1,{contentLabel:0}),Y._37(603979776,2,{_buttons:1}),Y._37(603979776,3,{_icons:1}),Y._15(11,16384,null,0,Tl.a,[],null,null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._11(16777216,null,2,1,null,a)),Y._15(14,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,2,["\n            "])),(n()(),Y._16(16,0,null,2,22,"div",[["class","addon-mod-forum-post-info"]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,1,null,s)),Y._15(19,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._16(21,0,null,null,13,"div",[["class","addon-mod-forum-post-author"]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,r)),Y._15(24,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,c)),Y._15(27,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,d)),Y._15(30,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,1,null,_)),Y._15(33,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,1,null,p)),Y._15(37,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._40(-1,2,["\n        "])),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._16(42,0,null,null,11,"ion-card-content",[],[[1,"padding-top",0]],null,null,null,null)),Y._15(43,16384,null,0,ou.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,g)),Y._15(46,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(48,16777216,null,null,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Y._15(49,540672,null,0,$n.a,[Y.p,un.a,on.a,Gn.a,Yn.a,Bn.a,tn.a,zn.a,Jn.a,Qn.a,nn.a,Xn.a,[2,Zn.a],[2,nl.a],[2,sn.a],ll.a,ln.a,ul.a,ol.a,tl.a,Y.W],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"],contextLevel:[3,"contextLevel"],contextInstanceId:[4,"contextInstanceId"],courseId:[5,"courseId"]},null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,h)),Y._15(52,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._16(55,0,null,null,13,"div",[["class","addon-mod-forum-post-more-info"]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,I)),Y._15(58,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,v)),Y._15(61,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._11(16777216,null,null,1,null,b)),Y._15(64,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n\n        "])),(n()(),Y._11(16777216,null,null,1,null,y)),Y._15(67,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._40(-1,null,["\n\n    "])),(n()(),Y._11(16777216,null,null,1,null,T)),Y._15(71,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n"])),(n()(),Y._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,14,0,u.displaySubject);n(l,19,0,u.post.userfullname);n(l,24,0,u.post.userfullname);n(l,27,0,u.post.groupname);n(l,30,0,u.post.modified);n(l,33,0,!u.post.modified);n(l,37,0,!u.displaySubject);n(l,46,0,u.post.isprivatereply);n(l,49,0,u.post.message,u.component,u.componentId,"module",u.forum&&u.forum.cmid,u.courseId);n(l,52,0,u.post.attachments&&u.post.attachments.length>0);n(l,58,0,u.tagsEnabled&&u.post.tags&&u.post.tags.length>0);n(l,61,0,u.forum&&u.ratingInfo);n(l,64,0,u.forum&&u.ratingInfo);n(l,67,0,u.post.id&&u.post.canreply&&!u.post.isprivatereply);n(l,71,0,u.post.id&&!u.replyData.isEditing&&u.replyData.replyingTo==u.post.id||!u.post.id&&u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent)},function(n,l){var u=l.component;n(l,3,0,Y._19(1,"addon-mod_forum-post-",u.post.id,""));n(l,42,0,0==u.post.parent||null)})}function O(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,3,"ion-title",[],null,null,null,Rn.b,Rn.a)),Y._15(1,49152,null,0,Fn.a,[Vn.a,Y.p,Y.K,[2,Hn.a],[2,qn.a]],null,null),(n()(),Y._16(2,16777216,null,0,1,"core-format-text",[["contextLevel","module"]],null,null,null,null,null)),Y._15(3,540672,null,0,$n.a,[Y.p,un.a,on.a,Gn.a,Yn.a,Bn.a,tn.a,zn.a,Jn.a,Qn.a,nn.a,Xn.a,[2,Zn.a],[2,nl.a],[2,sn.a],ll.a,ln.a,ul.a,ol.a,tl.a,Y.W],{text:[0,"text"],contextLevel:[1,"contextLevel"],contextInstanceId:[2,"contextInstanceId"],courseId:[3,"courseId"]},null)],function(n,l){var u=l.component;n(l,3,0,u.discussion.subject,"module",u.cmId,u.courseId)},null)}function w(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.doRefresh(null,u)&&o}return o},el.b,el.a)),Y._15(1,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i])],function(n,l){var u=l.component;n(l,1,0,Y._41(l,1,0,Y._29(l,2).transform("addon.mod_forum.refreshposts")),u.refreshIcon,!1,650)},null)}function A(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.doRefresh(null,u,!0)&&o}return o},el.b,el.a)),Y._15(1,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i])],function(n,l){var u=l.component;n(l,1,0,Y._41(l,1,0,Y._29(l,2).transform("core.settings.synchronizenow")),u.syncIcon,!1,550)},null)}function L(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,7,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),Y._15(1,16384,null,0,rl.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Y._15(4,147456,null,0,cl.a,[Vn.a,Y.p,Y.K],{name:[0,"name"]},null),(n()(),Y._40(5,null,[" ","\n        "])),Y._33(6,{$a:0}),Y._32(131072,sl.a,[Yn.a,Y.i])],function(n,l){n(l,4,0,"warning")},function(n,l){var u=l.component;n(l,3,0,Y._29(l,4)._hidden);n(l,5,0,Y._41(l,5,0,Y._29(l,7).transform("core.hasdatatosync",n(l,6,0,u.discussionStr))))})}function E(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),Y._15(1,16384,null,0,rl.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(3,0,null,null,1,"ion-icon",[["name","information-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),Y._15(4,147456,null,0,cl.a,[Vn.a,Y.p,Y.K],{name:[0,"name"]},null),(n()(),Y._40(5,null,[" ","\n        "]))],function(n,l){n(l,4,0,"information-circle")},function(n,l){var u=l.component;n(l,3,0,Y._29(l,4)._hidden);n(l,5,0,u.availabilityMessage)})}function W(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,6,"ion-card",[["class","core-info-card"],["icon-start",""]],null,null,null,null,null)),Y._15(1,16384,null,0,rl.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(3,0,null,null,1,"core-icon",[["name","fa-lock"]],null,null,null,dl.b,dl.a)),Y._15(4,704512,null,0,_l.a,[Y.p,Vn.a],{name:[0,"name"]},null),(n()(),Y._40(5,null,[" ","\n        "])),Y._32(131072,sl.a,[Yn.a,Y.i])],function(n,l){n(l,4,0,"fa-lock")},function(n,l){n(l,5,0,Y._41(l,5,0,Y._29(l,6).transform("addon.mod_forum.discussionlocked")))})}function K(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,4,"div",[["class","highlight"],["margin-bottom",""]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(2,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var o=!0;if("onPostChange"===l){o=!1!==n.component.postListChanged()&&o}return o},D,su)),Y._15(3,245760,null,0,tu.a,[en.a,eu.a,on.a,Gn.a,Yn.a,_n.a,mn.a,fn.a,pn.a,iu.a,[2,nl.a],au.a,Wl.a,ln.a,un.a],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],accessInfo:[9,"accessInfo"],ratingInfo:[10,"ratingInfo"]},{onPostChange:"onPostChange"}),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,3,1,[u.discussion,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.accessInfo,u.ratingInfo])},null)}function M(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,"ion-item-divider",[["class","item item-divider"]],null,null,null,kl.b,kl.a)),Y._15(1,1097728,null,3,Cl.a,[Sl.a,Vn.a,Y.p,Y.K,[2,xl.a]],null,null),Y._37(335544320,4,{contentLabel:0}),Y._37(603979776,5,{_buttons:1}),Y._37(603979776,6,{_icons:1}),Y._15(5,16384,null,0,Jl.a,[Vn.a,Y.p,Y.K],null,null)],null,null)}function U(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,1,null,M)),Y._15(3,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._16(5,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var o=!0;if("onPostChange"===l){o=!1!==n.component.postListChanged()&&o}return o},D,su)),Y._15(6,245760,null,0,tu.a,[en.a,eu.a,on.a,Gn.a,Yn.a,_n.a,mn.a,fn.a,pn.a,iu.a,[2,nl.a],au.a,Wl.a,ln.a,un.a],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],accessInfo:[9,"accessInfo"],parentSubject:[10,"parentSubject"],ratingInfo:[11,"ratingInfo"]},{onPostChange:"onPostChange"}),(n()(),Y._40(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,3,0,!l.context.first);n(l,6,1,[l.context.$implicit,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.accessInfo,u.postSubjects[l.context.$implicit.parent],u.ratingInfo])},null)}function j(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,"ion-card",[],null,null,null,null,null)),Y._15(1,16384,null,0,rl.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._11(16777216,null,null,1,null,U)),Y._15(4,802816,null,0,gl.j,[Y.W,Y.T,Y.v],{ngForOf:[0,"ngForOf"]},null),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.component.posts)},null)}function N(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function R(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,2,null,N)),Y._15(3,540672,null,0,gl.r,[Y.W],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),Y._33(4,{post:0}),(n()(),Y._40(-1,null,["\n            "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),Y._29(l.parent.parent,104))},null)}function F(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._11(16777216,null,null,1,null,R)),Y._15(3,802816,null,0,gl.j,[Y.W,Y.T,Y.v],{ngForOf:[0,"ngForOf"]},null),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){n(l,3,0,l.component.posts)},null)}function V(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function H(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                    "])),(n()(),Y._11(16777216,null,null,2,null,V)),Y._15(3,540672,null,0,gl.r,[Y.W],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),Y._33(4,{post:0}),(n()(),Y._40(-1,null,["\n                "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),Y._29(l.parent.parent.parent,104))},null)}function q(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,4,"div",[["padding-left",""]],null,null,null,null,null)),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._11(16777216,null,null,1,null,H)),Y._15(3,802816,null,0,gl.j,[Y.W,Y.T,Y.v],{ngForOf:[0,"ngForOf"]},null),(n()(),Y._40(-1,null,["\n            "]))],function(n,l){n(l,3,0,l.parent.context.post.children)},null)}function $(n){return Y._42(0,[(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._16(1,0,null,null,5,"ion-card",[],null,null,null,null,null)),Y._15(2,16384,null,0,rl.a,[Vn.a,Y.p,Y.K],null,null),(n()(),Y._40(-1,null,["\n                "])),(n()(),Y._16(4,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var o=!0;if("onPostChange"===l){o=!1!==n.component.postListChanged()&&o}return o},D,su)),Y._15(5,245760,null,0,tu.a,[en.a,eu.a,on.a,Gn.a,Yn.a,_n.a,mn.a,fn.a,pn.a,iu.a,[2,nl.a],au.a,Wl.a,ln.a,un.a],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],accessInfo:[9,"accessInfo"],parentSubject:[10,"parentSubject"],ratingInfo:[11,"ratingInfo"]},{onPostChange:"onPostChange"}),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._11(16777216,null,null,1,null,q)),Y._15(9,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,5,1,[l.context.post,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.accessInfo,u.postSubjects[l.context.post.parent],u.ratingInfo]);n(l,9,0,l.context.post.children.length&&l.context.post.children[0].subject)},null)}function G(n){return Y._42(0,[Y._37(402653184,1,{content:0}),(n()(),Y._16(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),Y._15(2,16384,null,0,ru.a,[Vn.a,Y.p,Y.K,[2,cu.a]],null,null),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._16(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,du.b,du.a)),Y._15(5,49152,null,0,qn.a,[Yl.a,[2,cu.a],[2,Zn.a],Vn.a,Y.p,Y.K],null,null),Y._15(6,212992,null,0,_u.a,[qn.a,Bn.a,Yn.a,ln.a],null,null),(n()(),Y._40(-1,3,["\n        "])),(n()(),Y._11(16777216,null,3,1,null,O)),Y._15(9,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,3,["\n        "])),(n()(),Y._16(11,0,null,2,4,"ion-buttons",[["end",""]],null,null,null,null,null)),Y._15(12,16384,null,1,fu.a,[Vn.a,Y.p,Y.K,[2,Hn.a],[2,qn.a]],null,null),Y._37(603979776,2,{_buttons:1}),(n()(),Y._40(-1,null,["\n            "])),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._40(-1,3,["\n    "])),(n()(),Y._40(-1,null,["\n"])),(n()(),Y._40(-1,null,["\n"])),(n()(),Y._16(19,0,null,null,49,"core-navbar-buttons",[["end",""]],null,null,null,mu.b,mu.a)),Y._15(20,245760,null,1,pu.a,[Y.p,Jn.a,on.a],null,null),Y._37(603979776,3,{buttons:1}),(n()(),Y._40(-1,0,["\n    "])),(n()(),Y._16(23,0,null,0,44,"core-context-menu",[],null,null,null,gu.b,gu.a)),Y._15(24,245760,null,0,al.a,[Yn.a,au.a,Y.p,on.a,[2,hu.a],tn.a],null,null),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._11(16777216,null,0,1,null,w)),Y._15(27,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._11(16777216,null,0,1,null,A)),Y._15(30,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(32,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-down"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.changeSort("flat-oldest")&&o}return o},el.b,el.a)),Y._15(33,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(36,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-up"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.changeSort("flat-newest")&&o}return o},el.b,el.a)),Y._15(37,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(40,0,null,0,2,"core-context-menu-item",[["iconAction","swap"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.changeSort("nested")&&o}return o},el.b,el.a)),Y._15(41,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(44,0,null,0,2,"core-context-menu-item",[["iconAction","fa-lock"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.setLockState(!0)&&o}return o},el.b,el.a)),Y._15(45,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(48,0,null,0,2,"core-context-menu-item",[["iconAction","fa-unlock"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.setLockState(!1)&&o}return o},el.b,el.a)),Y._15(49,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(52,0,null,0,2,"core-context-menu-item",[["iconAction","fa-map-pin"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.setPinState(!0)&&o}return o},el.b,el.a)),Y._15(53,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(56,0,null,0,2,"core-context-menu-item",[["iconAction","fa-map-pin"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.setPinState(!1)&&o}return o},el.b,el.a)),Y._15(57,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],iconSlash:[2,"iconSlash"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(60,0,null,0,2,"core-context-menu-item",[["iconAction","fa-star"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.toggleFavouriteState(!0)&&o}return o},el.b,el.a)),Y._15(61,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._16(64,0,null,0,2,"core-context-menu-item",[["iconAction","fa-star"]],null,[[null,"action"]],function(n,l,u){var o=!0;if("action"===l){o=!1!==n.component.toggleFavouriteState(!1)&&o}return o},el.b,el.a)),Y._15(65,770048,null,0,il.a,[al.a],{content:[0,"content"],iconAction:[1,"iconAction"],iconSlash:[2,"iconSlash"],priority:[3,"priority"],hidden:[4,"hidden"]},{action:"action"}),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,0,["\n    "])),(n()(),Y._40(-1,0,["\n"])),(n()(),Y._40(-1,null,["\n"])),(n()(),Y._16(70,0,null,null,36,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Iu.b,Iu.a)),Y._15(71,4374528,[[1,4]],0,nl.a,[Vn.a,Bn.a,ql.a,Y.p,Y.K,Yl.a,vu.a,Y.D,[2,cu.a],[2,Zn.a]],null,null),(n()(),Y._40(-1,1,["\n    "])),(n()(),Y._16(73,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,u){var o=!0;if("ionRefresh"===l){o=!1!==n.component.doRefresh(u)&&o}return o},null,null)),Y._15(74,212992,null,0,bu.a,[Bn.a,nl.a,Y.D,Hl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),Y._40(-1,null,["\n        "])),(n()(),Y._16(76,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,yu.b,yu.a)),Y._15(77,114688,null,0,Pu.a,[bu.a,Vn.a],{pullingText:[0,"pullingText"]},null),Y._32(131072,sl.a,[Yn.a,Y.i]),(n()(),Y._40(-1,null,["\n    "])),(n()(),Y._40(-1,1,["\n\n    "])),(n()(),Y._16(81,0,null,1,24,"core-loading",[],null,null,null,ku.b,ku.a)),Y._15(82,638976,null,0,Cu.a,[Yn.a,Y.p,ln.a,tn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._11(16777216,null,0,1,null,L)),Y._15(86,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n\n        "])),(n()(),Y._40(-1,0,["\n        "])),(n()(),Y._11(16777216,null,0,1,null,E)),Y._15(90,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n\n        "])),(n()(),Y._11(16777216,null,0,1,null,W)),Y._15(93,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n\n        "])),(n()(),Y._11(16777216,null,0,1,null,K)),Y._15(96,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n\n        "])),(n()(),Y._11(16777216,null,0,1,null,j)),Y._15(99,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n\n        "])),(n()(),Y._11(16777216,null,0,1,null,F)),Y._15(102,16384,null,0,gl.k,[Y.W,Y.T],{ngIf:[0,"ngIf"]},null),(n()(),Y._40(-1,0,["\n\n        "])),(n()(),Y._11(0,[["nestedPosts",2]],0,0,null,$)),(n()(),Y._40(-1,0,["\n    "])),(n()(),Y._40(-1,1,["\n"])),(n()(),Y._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,6,0);n(l,9,0,u.discussion),n(l,20,0),n(l,24,0);n(l,27,0,u.discussionLoaded&&!u.postHasOffline&&u.isOnline);n(l,30,0,u.discussionLoaded&&!u.isSplitViewOn&&u.postHasOffline&&u.isOnline);n(l,33,0,Y._41(l,33,0,Y._29(l,34).transform("addon.mod_forum.modeflatoldestfirst")),"arrow-round-down",500,"flat-oldest"==u.sort);n(l,37,0,Y._41(l,37,0,Y._29(l,38).transform("addon.mod_forum.modeflatnewestfirst")),"arrow-round-up",450,"flat-newest"==u.sort);n(l,41,0,Y._41(l,41,0,Y._29(l,42).transform("addon.mod_forum.modenested")),"swap",400,"nested"==u.sort);n(l,45,0,Y._41(l,45,0,Y._29(l,46).transform("addon.mod_forum.lockdiscussion")),"fa-lock",300,!u.discussion||!u.discussion.canlock||u.discussion.locked);n(l,49,0,Y._41(l,49,0,Y._29(l,50).transform("addon.mod_forum.unlockdiscussion")),"fa-unlock",300,!u.discussion||!u.discussion.canlock||!u.discussion.locked);n(l,53,0,Y._41(l,53,0,Y._29(l,54).transform("addon.mod_forum.pindiscussion")),"fa-map-pin",250,!u.discussion||!u.canPin||u.discussion.pinned);n(l,57,0,Y._41(l,57,0,Y._29(l,58).transform("addon.mod_forum.unpindiscussion")),"fa-map-pin",!0,250,!u.discussion||!u.canPin||!u.discussion.pinned);n(l,61,0,Y._41(l,61,0,Y._29(l,62).transform("addon.mod_forum.addtofavourites")),"fa-star",200,!u.discussion||!u.discussion.canfavourite||u.discussion.starred);n(l,65,0,Y._41(l,65,0,Y._29(l,66).transform("addon.mod_forum.removefromfavourites")),"fa-star",!0,200,!u.discussion||!u.discussion.canfavourite||!u.discussion.starred);n(l,74,0,u.discussionLoaded);n(l,77,0,Y._19(1,"",Y._41(l,77,0,Y._29(l,78).transform("core.pulltorefresh")),""));n(l,82,0,u.discussionLoaded);n(l,86,0,u.postHasOffline||u.hasOfflineRatings);n(l,90,0,u.availabilityMessage);n(l,93,0,u.discussion&&u.discussion.locked);n(l,96,0,u.discussion);n(l,99,0,"nested"!=u.sort);n(l,102,0,"nested"==u.sort)},function(n,l){n(l,4,0,Y._29(l,5)._hidden,Y._29(l,5)._sbPadding);n(l,70,0,Y._29(l,71).statusbarPadding,Y._29(l,71)._hasRefresher);n(l,73,0,"inactive"!==Y._29(l,74).state,Y._29(l,74)._top);n(l,76,0,Y._29(l,77).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var Y=u(1),B=u(0),z=(u(6),u(4)),J=u(29),Q=u(33),X=u(738),Z=u(189),nn=u(10),ln=u(11),un=u(2),on=u(5),tn=u(3),en=u(74),an=u(47),sn=u(28),rn=u(233),cn=u(204),dn=u(238),_n=u(138),fn=u(235),mn=u(283),pn=u(258),gn=function(){function n(n,l,u,o,t,e,i,a,s,r,c,d,_,f,m,p,g,h){var I=this;this.appProvider=o,this.eventsProvider=t,this.sitesProvider=e,this.domUtils=i,this.utils=a,this.translate=s,this.uploaderProvider=r,this.forumProvider=c,this.forumOffline=d,this.forumHelper=_,this.forumSync=f,this.ratingOffline=m,this.userProvider=p,this.svComponent=g,this.navCtrl=h,this.forum={},this.accessInfo={},this.discussionLoaded=!1,this.sort="nested",this.replyData={replyingTo:0,isEditing:!1,subject:"",message:null,files:[],isprivatereply:!1},this.originalData={subject:null,message:null,files:[],isprivatereply:!1},this.refreshIcon="spinner",this.syncIcon="spinner",this.discussionStr="",this.component=_n.a.COMPONENT,this.canPin=!1,this.courseId=n.get("courseId"),this.cmId=n.get("cmId"),this.forumId=n.get("forumId"),this.discussion=n.get("discussion"),this.discussionId=this.discussion?this.discussion.discussion:n.get("discussionId"),this.trackPosts=n.get("trackPosts"),this.postId=n.get("postId"),this.isOnline=this.appProvider.isOnline(),this.onlineObserver=l.onchange().subscribe(function(){u.run(function(){I.isOnline=I.appProvider.isOnline()})}),this.isSplitViewOn=this.svComponent&&this.svComponent.isOn(),this.discussionStr=s.instant("addon.mod_forum.discussion")}return n.prototype.ionViewDidLoad=function(){var n=this;this.sitesProvider.getCurrentSite().getLocalSiteConfig("AddonModForumDiscussionSort").catch(function(){n.userProvider.getUserPreference("forum_displaymode").catch(function(){}).then(function(l){switch(l&&parseInt(l,10)){case 1:n.sort="flat-oldest";break;case-1:n.sort="flat-newest";break;case 3:n.sort="nested"}})}).then(function(l){n.sort=l}).finally(function(){n.fetchPosts(!0,!1,!0).then(function(){n.postId&&setTimeout(function(){n.domUtils.scrollToElementBySelector(n.content,"#addon-mod_forum-post-"+n.postId)})})})},n.prototype.ionViewDidEnter=function(){var n=this;this.syncObserver=this.eventsProvider.on(pn.a.AUTO_SYNCED,function(l){l.forumId==n.forumId&&n.discussionId==l.discussionId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.syncManualObserver=this.eventsProvider.on(pn.a.MANUAL_SYNCED,function(l){"discussion"!=l.source&&l.forumId==n.forumId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.eventsProvider.trigger(_n.a.VIEW_DISCUSSION_EVENT,{forumId:this.forumId,discussion:this.discussionId},this.sitesProvider.getCurrentSiteId()),this.ratingOfflineObserver=this.eventsProvider.on(rn.a.RATING_SAVED_EVENT,function(l){"mod_forum"==l.component&&"post"==l.ratingArea&&"module"==l.contextLevel&&l.instanceId==n.cmId&&l.itemSetId==n.discussionId&&(n.hasOfflineRatings=!0)}),this.ratingSyncObserver=this.eventsProvider.on(dn.a.SYNCED_EVENT,function(l){"mod_forum"==l.component&&"post"==l.ratingArea&&"module"==l.contextLevel&&l.instanceId==n.cmId&&l.itemSetId==n.discussionId&&(n.hasOfflineRatings=!1)}),this.changeDiscObserver=this.eventsProvider.on(_n.a.CHANGE_DISCUSSION_EVENT,function(l){(n.forumId&&n.forumId===l.forumId||l.cmId===n.cmId)&&n.forumProvider.invalidateDiscussionsList(n.forumId).finally(function(){void 0!==l.locked&&(n.discussion.locked=l.locked),void 0!==l.pinned&&(n.discussion.pinned=l.pinned),void 0!==l.starred&&(n.discussion.starred=l.starred),void 0!==l.deleted&&l.deleted&&(0==l.post.parent?n.svComponent&&n.svComponent.isOn()?n.svComponent.emptyDetails():n.navCtrl.pop():(n.discussionLoaded=!1,n.refreshPosts()))})})},n.prototype.ionViewCanLeave=function(){var n=this;return(this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmcanceledit")):Promise.resolve()).then(function(){n.uploaderProvider.clearTmpFiles(n.replyData.files)})},n.prototype.fetchForum=function(){return this.courseId&&this.cmId?this.forumProvider.getForum(this.courseId,this.cmId):this.courseId&&this.forumId?this.forumProvider.getForumById(this.courseId,this.forumId):Promise.reject(null)},n.prototype.fetchPosts=function(n,l,u){var o,t=this,e=[],i=[],a=!1;return(n?this.syncDiscussion(l).catch(function(){}):Promise.resolve()).then(function(){return t.forumProvider.getDiscussionPosts(t.discussionId).then(function(n){e=n.posts,o=n.ratinginfo}).then(function(){return t.forumOffline.getDiscussionReplies(t.discussionId).then(function(n){t.postHasOffline=!!n.length;var l=[],u={};return e.forEach(function(n){u[n.id]=n,a=a||!n.postread}),n.forEach(function(n){t.forumId||(t.forumId=n.forumid),t.courseId||(t.courseId=n.courseid),l.push(t.forumHelper.convertOfflineReplyToOnline(n).then(function(n){i.push(n),u[n.parent].canreply=!1}))}),Promise.all(l).then(function(){e=t.utils.objectToArray(u)})})})}).then(function(){var n=i.concat(e),l=t.forumProvider.extractStartingPost(n);if(l&&(t.discussion=Object.assign(t.discussion||{},l)),"nested"==t.sort)t.forumProvider.sortDiscussionPosts(n,"ASC"),n=t.utils.formatTree(n,"parent","id",t.discussion.id);else{t.forumProvider.sortDiscussionPosts(n,"flat-newest"==t.sort?"DESC":"ASC")}return t.fetchForum().then(function(l){void 0!==l.istracked&&(t.trackPosts=l.istracked),t.forumId=l.id,t.cmId=l.cmid,t.courseId=l.course,t.forum=l,t.availabilityMessage=t.forumHelper.getAvailabilityMessage(l);var u=[];return u.push(t.forumProvider.getAccessInformation(t.forumId).then(function(u){t.accessInfo=u,t.forumHelper.isCutoffDateReached(l)&&!u.cancanoverridecutoff&&n.forEach(function(n){n.canreply=!1})})),t.discussion||u.push(t.loadDiscussion(t.forumId,t.discussionId)),Promise.all(u)}).catch(function(){}).then(function(){if(!t.discussion)return Promise.reject("Invalid forum discussion.");t.discussion.userfullname&&0==t.discussion.parent&&"single"==t.forum.type&&(t.discussion.userfullname=null),t.posts=n,t.ratingInfo=o,t.postSubjects=t.getAllPosts().reduce(function(n,l){return n[l.id]=l.subject,n},(l={},l[t.discussion.id]=t.discussion.subject,l));var l})}).then(function(){if(t.forumProvider.isSetPinStateAvailableForSite())return t.forumProvider.canAddDiscussionToAll(t.forumId).then(function(n){t.canPin=!!n.canpindiscussions}).catch(function(){t.canPin=!1});t.canPin=!1}).then(function(){return t.ratingOffline.hasRatings("mod_forum","post","module",t.cmId,t.discussionId).then(function(n){t.hasOfflineRatings=n})}).catch(function(n){t.domUtils.showErrorModal(n)}).finally(function(){t.discussionLoaded=!0,t.refreshIcon="refresh",t.syncIcon="sync",(u||a&&t.trackPosts)&&t.forumProvider.logDiscussionView(t.discussionId,t.forumId||-1,t.forum.name).catch(function(){}).finally(function(){t.eventsProvider.trigger(_n.a.MARK_READ_EVENT,{courseId:t.courseId,moduleId:t.cmId},t.sitesProvider.getCurrentSiteId())})})},n.prototype.loadDiscussion=function(n,l){var u=this;return!this.discussion&&n?this.forumHelper.getDiscussionById(n,l).then(function(n){u.discussion=n,u.discussionId=u.discussion.discussion}).catch(function(){}):Promise.resolve()},n.prototype.syncDiscussion=function(n){var l=this,u=[];return u.push(this.forumSync.syncDiscussionReplies(this.discussionId).then(function(n){return n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n&&n.updated&&l.eventsProvider.trigger(pn.a.MANUAL_SYNCED,{forumId:l.forumId,userId:l.sitesProvider.getCurrentSiteUserId(),source:"discussion"},l.sitesProvider.getCurrentSiteId()),n.updated})),u.push(this.forumSync.syncRatings(this.cmId,this.discussionId).then(function(n){n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0])})),Promise.all(u).catch(function(u){return n&&l.domUtils.showErrorModalDefault(u,"core.errorsync",!0),Promise.reject(null)})},n.prototype.doRefresh=function(n,l,u){return void 0===u&&(u=!1),this.discussionLoaded?this.refreshPosts(!0,u).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},n.prototype.refreshPosts=function(n,l){var u=this;this.domUtils.scrollToTop(this.content),this.refreshIcon="spinner",this.syncIcon="spinner";var o=[this.forumProvider.invalidateForumData(this.courseId),this.forumProvider.invalidateDiscussionPosts(this.discussionId,this.forumId),this.forumProvider.invalidateAccessInformation(this.forumId),this.forumProvider.invalidateCanAddDiscussion(this.forumId)];return this.utils.allPromises(o).catch(function(){}).then(function(){return u.fetchPosts(n,l)})},n.prototype.changeSort=function(n){return this.discussionLoaded=!1,this.sort=n,this.sitesProvider.getCurrentSite().setLocalSiteConfig("AddonModForumDiscussionSort",this.sort),this.domUtils.scrollToTop(this.content),this.fetchPosts()},n.prototype.setLockState=function(n){var l=this,u=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.setLockState(this.forumId,this.discussionId,n).then(function(n){l.discussion.locked=n.locked;l.eventsProvider.trigger(_n.a.CHANGE_DISCUSSION_EVENT,{forumId:l.forumId,discussionId:l.discussionId,cmId:l.cmId,locked:l.discussion.locked},l.sitesProvider.getCurrentSiteId()),l.domUtils.showToast("addon.mod_forum.lockupdated",!0)}).catch(function(n){l.domUtils.showErrorModal(n)}).finally(function(){u.dismiss()})},n.prototype.setPinState=function(n){var l=this,u=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.setPinState(this.discussionId,n).then(function(){l.discussion.pinned=n;l.eventsProvider.trigger(_n.a.CHANGE_DISCUSSION_EVENT,{forumId:l.forumId,discussionId:l.discussionId,cmId:l.cmId,pinned:l.discussion.pinned},l.sitesProvider.getCurrentSiteId()),l.domUtils.showToast("addon.mod_forum.pinupdated",!0)}).catch(function(n){l.domUtils.showErrorModal(n)}).finally(function(){u.dismiss()})},n.prototype.toggleFavouriteState=function(n){var l=this,u=this.domUtils.showModalLoading("core.sending",!0);this.forumProvider.toggleFavouriteState(this.discussionId,n).then(function(){l.discussion.starred=n;l.eventsProvider.trigger(_n.a.CHANGE_DISCUSSION_EVENT,{forumId:l.forumId,discussionId:l.discussionId,cmId:l.cmId,starred:l.discussion.starred},l.sitesProvider.getCurrentSiteId()),l.domUtils.showToast("addon.mod_forum.favouriteupdated",!0)}).catch(function(n){l.domUtils.showErrorModal(n)}).finally(function(){u.dismiss()})},n.prototype.postListChanged=function(){var n=this;this.eventsProvider.trigger(_n.a.REPLY_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId},this.sitesProvider.getCurrentSiteId()),this.discussionLoaded=!1,this.refreshPosts().finally(function(){n.discussionLoaded=!0})},n.prototype.ionViewWillLeave=function(){this.syncObserver&&this.syncObserver.off(),this.syncManualObserver&&this.syncManualObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off(),this.changeDiscObserver&&this.changeDiscObserver.off()},n.prototype.ngOnDestroy=function(){this.onlineObserver&&this.onlineObserver.unsubscribe()},n.prototype.getAllPosts=function(){return[].concat.apply([],this.posts.map(this.flattenPostHierarchy.bind(this)))},n.prototype.flattenPostHierarchy=function(n){for(var l=[n],u=0,o=n.children||[];u<o.length;u++){l.push.apply(l,this.flattenPostHierarchy(o[u]))}return l},n=Object(B.__decorate)([Object(B.__param)(16,Object(Y.E)())],n)}(),hn=function(){return function(){}}(),In=u(1524),vn=u(1525),bn=u(1526),yn=u(1527),Pn=u(1528),kn=u(1529),Cn=u(1530),Sn=u(1531),xn=u(1532),Tn=u(1533),Dn=u(1534),On=u(1535),wn=u(1536),An=u(1539),Ln=u(1540),En=u(1537),Wn=u(1538),Kn=u(1541),Mn=u(1542),Un=u(1568),jn=u(1576),Nn=u(1577),Rn=u(726),Fn=u(316),Vn=u(9),Hn=u(251),qn=u(214),$n=u(49),Gn=u(12),Yn=u(18),Bn=u(17),zn=u(23),Jn=u(7),Qn=u(19),Xn=u(16),Zn=u(22),nl=u(30),ll=u(44),ul=u(43),ol=u(32),tl=u(37),el=u(95),il=u(85),al=u(80),sl=u(26),rl=u(92),cl=u(48),dl=u(91),_l=u(84),fl=u(252),ml=u(46),pl=u(42),gl=u(8),hl=u(216),Il=u(163),vl=u(187),bl=u(534),yl=u(329),Pl=u(67),kl=u(31),Cl=u(21),Sl=u(20),xl=u(27),Tl=u(34),Dl=u(497),Ol=u(327),wl=u(2171),Al=u(1549),Ll=u(2172),El=u(1548),Wl=u(165),Kl=u(68),Ml=u(255),Ul=u(202),jl=u(24),Nl=u(485),Rl=u(319),Fl=u(153),Vl=u(90),Hl=u(45),ql=u(35),$l=u(113),Gl=u(93),Yl=u(36),Bl=u(318),zl=u(254),Jl=u(103),Ql=u(167),Xl=u(121),Zl=u(122),nu=u(230),lu=u(25),uu=u(321),ou=u(490),tu=u(1591),eu=u(81),iu=u(166),au=u(72),su=Y._14({encapsulation:2,styles:[],data:{}}),ru=u(375),cu=u(40),du=u(725),_u=u(478),fu=u(376),mu=u(99),pu=u(88),gu=u(94),hu=u(78),Iu=u(186),vu=u(110),bu=u(162),yu=u(215),Pu=u(176),ku=u(55),Cu=u(52),Su=u(71),xu=Y._14({encapsulation:2,styles:[],data:{}}),Tu=Y._12("page-addon-mod-forum-discussion",gn,function(n){return Y._42(0,[(n()(),Y._16(0,0,null,null,1,"page-addon-mod-forum-discussion",[],null,null,null,G,xu)),Y._15(1,180224,null,0,gn,[Su.a,Z.a,Y.D,nn.a,ln.a,un.a,on.a,tn.a,Yn.a,en.a,_n.a,fn.a,mn.a,pn.a,cn.a,an.a,[2,sn.a],Zn.a],null,null)],null,null)},{},{},[]),Du=u(371),Ou=u(372),wu=u(374),Au=u(373),Lu=u(477),Eu=u(724),Wu=u(109),Ku=u(275),Mu=u(76),Uu=u(734),ju=u(277),Nu=u(274);u.d(l,"AddonModForumDiscussionPageModuleNgFactory",function(){return Ru});var Ru=Y._13(hn,[],function(n){return Y._25([Y._26(512,Y.n,Y._6,[[8,[In.a,vn.a,bn.a,yn.a,Pn.a,kn.a,Cn.a,Sn.a,xn.a,Tn.a,Dn.a,On.a,wn.a,An.a,Ln.a,En.a,Wn.a,Kn.a,Mn.a,Un.a,jn.a,Nn.a,Tu]],[3,Y.n],Y.B]),Y._26(4608,gl.m,gl.l,[Y.x,[2,gl.w]]),Y._26(4608,jl.x,jl.x,[]),Y._26(4608,jl.d,jl.d,[]),Y._26(4608,Du.b,Du.a,[]),Y._26(4608,Ou.a,Ou.b,[]),Y._26(4608,wu.b,wu.a,[]),Y._26(4608,Au.b,Au.a,[]),Y._26(4608,Yn.a,Yn.a,[Lu.a,Du.b,Ou.a,wu.b,Au.b,Yn.b,Yn.c]),Y._26(512,gl.b,gl.b,[]),Y._26(512,jl.v,jl.v,[]),Y._26(512,jl.i,jl.i,[]),Y._26(512,jl.s,jl.s,[]),Y._26(512,Eu.a,Eu.a,[]),Y._26(512,z.a,z.a,[]),Y._26(512,Q.a,Q.a,[]),Y._26(512,Wu.a,Wu.a,[]),Y._26(512,J.a,J.a,[]),Y._26(512,Ku.a,Ku.a,[]),Y._26(512,Mu.a,Mu.a,[]),Y._26(512,Uu.a,Uu.a,[]),Y._26(512,ju.a,ju.a,[]),Y._26(512,X.a,X.a,[]),Y._26(512,Eu.b,Eu.b,[]),Y._26(512,hn,hn,[]),Y._26(256,Yn.c,void 0,[]),Y._26(256,Yn.b,void 0,[]),Y._26(256,Nu.a,gn,[])])})},2171:function(n,l,u){"use strict";function o(n){return i._42(0,[(n()(),i._16(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),i._15(1,16384,[[4,4]],0,a.a,[i.p],{value:[0,"value"]},null),(n()(),i._40(2,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.value)},function(n,l){n(l,2,0,l.context.$implicit.name)})}function t(n){return i._42(0,[(n()(),i._16(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,s.b,s.a)),i._15(1,1097728,null,3,r.a,[c.a,d.a,i.p,i.K,[2,_.a]],null,null),i._37(335544320,1,{contentLabel:0}),i._37(603979776,2,{_buttons:1}),i._37(603979776,3,{_icons:1}),i._15(5,16384,null,0,f.a,[],null,null),(n()(),i._40(-1,2,["\n    "])),(n()(),i._16(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),i._15(8,16384,[[1,4]],0,m.a,[d.a,i.p,i.K,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),i._40(9,null,["",""])),i._32(131072,p.a,[g.a,i.i]),(n()(),i._40(-1,2,["\n    "])),(n()(),i._16(12,0,null,3,10,"ion-select",[["interface","action-sheet"],["text-start",""]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,u){var o=!0,t=n.component;if("click"===l){o=!1!==i._29(n,13)._click(u)&&o}if("keyup.space"===l){o=!1!==i._29(n,13)._keyup()&&o}if("ngModelChange"===l){o=!1!==(t.rating=u)&&o}if("ngModelChange"===l){o=!1!==t.userRatingChanged()&&o}return o},h.b,h.a)),i._15(13,1228800,null,1,I.a,[v.a,c.a,d.a,i.p,i.K,[2,r.a],b.a],{disabled:[0,"disabled"],interface:[1,"interface"]},null),i._37(603979776,4,{options:1}),i._35(1024,null,y.l,function(n){return[n]},[I.a]),i._15(16,671744,null,0,y.q,[[8,null],[8,null],[8,null],[2,y.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),i._35(2048,null,y.m,null,[y.q]),i._15(18,16384,null,0,y.n,[y.m],null,null),(n()(),i._40(-1,null,["\n        "])),(n()(),i._11(16777216,null,null,1,null,o)),i._15(21,802816,null,0,P.j,[i.W,i.T,i.v],{ngForOf:[0,"ngForOf"]},null),(n()(),i._40(-1,null,["\n    "])),(n()(),i._40(-1,2,["\n"]))],function(n,l){var u=l.component;n(l,13,0,!u.item.canrate,"action-sheet");n(l,16,0,!u.item.canrate,u.rating);n(l,21,0,u.scale.items)},function(n,l){n(l,9,0,i._41(l,9,0,i._29(l,10).transform("core.rating.rating")));n(l,12,0,i._29(l,13)._disabled,i._29(l,18).ngClassUntouched,i._29(l,18).ngClassTouched,i._29(l,18).ngClassPristine,i._29(l,18).ngClassDirty,i._29(l,18).ngClassValid,i._29(l,18).ngClassInvalid,i._29(l,18).ngClassPending)})}function e(n){return i._42(0,[(n()(),i._11(16777216,null,null,1,null,t)),i._15(1,16384,null,0,P.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,1,0,u.item&&(u.item.canrate||null!=u.item.rating)&&!u.disabled)},null)}u.d(l,"a",function(){return k}),l.b=e;var i=u(1),a=u(111),s=u(31),r=u(21),c=u(20),d=u(9),_=u(27),f=u(34),m=u(68),p=u(26),g=u(18),h=u(127),I=u(112),v=u(36),b=u(60),y=u(24),P=u(8),k=(u(5),u(11),u(233),u(204),u(2),i._14({encapsulation:2,styles:[],data:{}}))},2172:function(n,l,u){"use strict";function o(n){return i._42(0,[(n()(),i._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),i._40(1,null,["(",")"]))],null,function(n,l){n(l,1,0,l.component.item.count)})}function t(n){return i._42(0,[(n()(),i._16(0,0,null,null,11,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(n,l,u){var o=!0;if("click"===l){o=!1!==n.component.openRatings()&&o}return o},a.b,a.a)),i._15(1,1097728,null,3,s.a,[r.a,c.a,i.p,i.K,[2,d.a]],null,null),i._37(335544320,1,{contentLabel:0}),i._37(603979776,2,{_buttons:1}),i._37(603979776,3,{_icons:1}),i._15(5,16384,null,0,_.a,[],null,null),(n()(),i._40(6,2,["\n    ",""," ","\n    "])),i._32(131072,f.a,[m.a,i.i]),i._32(131072,f.a,[m.a,i.i]),(n()(),i._11(16777216,null,2,1,null,o)),i._15(10,16384,null,0,p.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,2,["\n"]))],function(n,l){var u=l.component;n(l,10,0,u.showCount&&u.item.count>0)},function(n,l){var u=l.component;n(l,0,0,!u.ratingInfo.canviewall||!u.item.count||null);n(l,6,0,i._41(l,6,0,i._29(l,7).transform(u.labelKey)),i._41(l,6,1,i._29(l,8).transform("core.labelsep")),u.item.aggregatestr||"-")})}function e(n){return i._42(0,[(n()(),i._11(16777216,null,null,1,null,t)),i._15(1,16384,null,0,p.k,[i.W,i.T],{ngIf:[0,"ngIf"]},null),(n()(),i._40(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,1,0,u.item&&u.item.canviewaggregate&&u.labelKey&&!u.disabled)},null)}u.d(l,"a",function(){return g}),l.b=e;var i=u(1),a=u(31),s=u(21),r=u(20),c=u(9),d=u(27),_=u(34),f=u(26),m=u(18),p=u(8),g=(u(11),u(233),u(2),i._14({encapsulation:2,styles:[],data:{}}))}});